# Writer UX 再設計ブリーフ（手8-2／CP@2025-09-21.v3-compact tests-augmented）

## 0. スコープ
対象：/writer（入力→生成→出力→共有→再編集）。Heroで確立したブランドトーン／操作感／UIトークンを継承し、「利用導線を販売に直結」させる。

## 1. 目的（KGI/KPI）
- KGI: 有料転換率の向上（/writer 利用者→決済導線到達率）
- KPI:
  - ① 入力完了率（フォーム離脱率の低減）
  - ② 1セッション当たりの生成成功数
  - ③ 共有ボタン利用率（/share 到達・コピー）
  - ④ CTA（プラン案内）クリック率
  - ⑤ エラーからの復帰成功率（ヘルプ導線経由）

## 2. 現状の課題（仮説）
- 入力フィールドの「何を書けば良いか」が不明瞭（構成・トーンの初期値が弱い）
- 生成→結果の「説得力」を可視化する要素（見出し階層・ハイライト・根拠提示）が不足
- 共有・レビュー（/share へ）動線が目立たない
- 戻る／微修正のリカバリ導線が浅い（再生成・比較のUXが弱い）
- ブランドトーン（色・余白・影・ガラス表現）が/hero とズレる箇所がある

## 3. 理想UX（要件）
- 入力：3ステップ以内で必須入力が完結（商品概要→用途/特徴→トーン）
- プリセット：構成（テンプレ）×話し方（トーン）を即選択可能。初期値は推奨セット。
- 結果提示：見出し・箇条・強調（Badge/Callout）で「説得力」を視覚化
- ワンクリック共有：コピー／/share 公開リンクの即時作成（成功トースト）
- 改善導線：①再生成（パラメータ保持）②差分ハイライト（前回比）
- 購買導線：結果右上かフッターにプランCTA（Basic/Standard/Premium）を常設
- ヘルプ：右サイドに折りたたみFAQ＋「うまくいかない？」の短縮導線

## 4. 画面フロー
[Header（ブランド）]
  └─[FormCard] 商品概要 | 特徴 | ターゲット | トーン | テンプレ
       └─ [Generate] → Loading → [ResultView]
[ResultView]
  ├─ タイトル/導入/本文（見出し階層）
  ├─ 操作：コピー | /share で公開 | 再生成 | 差分比較
  ├─ CTA：プラン案内（固定）
  └─ HelpPanel：改善ヒント/FAQ

## 5. UIトークン継承（例）
- Color: corporate-navy（P1–P3）主体、アクセント＝成功/警告/破壊の標準トークン
- Spacing: spacing-0..8 を段階利用（セクション間：6、要素間：3〜4）
- Radius: ui-radius-md（カード）/ lg（主要CTA）
- Shadow: sm（UI要素）/ md（モーダル/強調カード）
- Glass: header/nav 背景・HelpPanel に薄いブラー＋ヘアライン
- Motion: フェード＋微スライド（200ms / ease-out）

## 6. 構成ブロック仕様
### Header
- 固定ヘッダ（ロゴ・戻る・ドキュメント/価格へのショートカット）
- ガラス背景＋ヘアライン

### FormCard
- フィールド：
  1. 商品概要（必須・単文推奨、残文字カウンタ）
  2. 用途/特徴（複数タグ入力）
  3. ターゲット（選択肢＋自由記述）
  4. トーン（選択：プロ／親しみ／カジュアル／厳密）
  5. テンプレ（製品説明／LP導入／箇条書き など）
- 右上：プリセット（例：「楽天・家電 向け推奨」）
- 下部：生成ボタン（loading state/disabled 管理）

### ResultView
- H1/Lead/Sections の階層化（読みやすさ優先）
- 操作帯：コピー（クリップボード）／共有（/share POST→URL表示）／再生成（保持）
- 差分比較：前回生成結果を保持し、変更点にマーカー表示
- 右サイド HelpPanel：改善ヒント（入力のコツ、禁止ワード、NG例→良い例）
- フッターCTA：プラン比較（クリックで価格ページ）

## 7. 非機能要件
- /api/writer レスポンス shape を CP@2025-09-21.v3-compact 仕様に厳密準拠
- 200/4xx/5xx のトーストメッセージ統一（notify.* API）
- フォームは SSR非依存（クライアント）で再現性維持、型安全
- アクセシビリティ：ラベル紐づけ／Tab移動／ARIA 適切化

## 8. 計測
- イベント：form.submit / generate.success|fail / result.copy / result.share / cta.plan
- 属性：template、tone、token数、出力長、経過ms
- 目標値：初期 β でコピー率 40% / 共有率 15% / CTA 8%

## 9. 受け入れ条件（Acceptance Criteria）
- 入力必須のみで生成成功できる（3ステップ以内の導線）
- 共有リンク作成が 1 クリック＋トーストで確認可能
- 差分比較が視認可能（前回と今回で差分強調）
- UIトークン（色・余白・影・radius）が Hero と整合する
- /api/writer の strict shape を一切崩さない（追加キー禁止）

## 10. 非スコープ
- 課金導線の改修（プラン表示のリライトのみ）
- マルチ言語化
- 複数テンプレの同時バッチ生成

## 11. リスクと対策
- 出力品質ばらつき → プリセットの強化／プロンプト微調整UI
- 共有乱立 → 公開範囲の明示と簡易メタ情報（title/createdAt）

## 12. 段階的実装計画（1ファイル単位）
1) `app/writer/layout.tsx`（HeaderのUIトークン継承）
2) `app/writer/ClientPage.tsx`（FormCardの再構成）
3) `app/writer/components/ResultView.tsx`（新規）
4) `app/writer/components/HelpPanel.tsx`（新規）
5) 差分比較ユーティリティ `lib/diff.ts`（新規）
6) イベント計測の配線（既存 EventLog API を利用）
7) 共有POST→URL提示（/api/shares 既存 shape 前提）

## 13. 検証
- `pnpm typecheck && pnpm build && pnpm test` がグリーン
- 手動E2E：入力→生成→コピー→共有→再生成→差分比較→CTA 到達

--- 
作成日: 2025-10-17 / 担当: T-IMAFUKU & ChatGPT（手8-2）
