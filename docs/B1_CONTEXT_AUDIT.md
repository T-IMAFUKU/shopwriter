# Bプラン（生成精度アップ）フェーズ1 ? CONTEXT.md 前提監査チェックリスト（v2/Final）
確定日: 2025-09-19 JST / 対象: CONTEXT.md v2（見出し=14, 反映済み）

**サマリ**: `[x] 35 / 35`（追記メモは「本体へ反映済み」の記録のみ）

> 判定基準
> - `[x]` = CONTEXT.md v2 に記載あり、フェーズ1の「前提の明文化」として十分
> - 追記メモは v2 へ取り込み済みのため、差分はなし

## 0. 用語と範囲（Scope / Definitions）
- [x] Bプラン定義（精度アップの指標/範囲/非対象）
- [x] 対象機能の範囲（Writer/Share/Template 影響）
- [x] 非機能要件のフェーズ1含有/除外

## 1. 開発・実行環境（Environment / Stack）
- [x] Node.js 20.x / pnpm 9.x / TypeScript 5.6+
- [x] Next.js 15（App Router）/ shadcn/ui / Tailwind / sonner
- [x] Prisma / DB（Neon本番・SQLite開発）
- [x] 認証（NextAuth v4 + GitHub OAuth）/ 環境変数一覧 / Vercel設定
- [x] 既知の制約・ビルドコマンド（`pnpm prisma:generate:prod && next build`）

## 2. 生成要件（LLM前提・プロンプト規約）
- [x] 使用モデル群と規定値（temperature / tokens / JSON Mode）
- [x] プロンプト方針（日本語EC特化、トーン/文体、NG、属性優先度）
- [x] システム/ユーザープロンプトのテンプレ雛形と変数
- [x] 失敗戦略（補完・短文化・バリデNG時の誘導文）

## 3. データと評価（Datasets / Metrics / QA）
- [x] 参照データの所在（成功/禁止事例・社内テンプレ）
- [x] オフライン評価：評価軸と採点表
- [x] オンライン計測：イベント/指標と収集方法
- [x] サンプルセット（20ケース）と期待出力のスナップショット

## 4. API／サーバサイド前提
- [x] 対象API（/api/writer）と入力・出力スキーマ（Zod）
- [x] バリデ規則（必須/文字数/言語/EC属性）
- [x] タイムアウト/リトライ/フォールバック
- [x] ログ/トレース（PIIマスク・匿名方針）

## 5. DB・スキーマ・テンプレ管理
- [x] テンプレ/プリセット保存スキーマとバージョニング
- [x] ドラフト保存（改版履歴/差分/ロールバック）
- [x] アクセス制御（共有リンク時のマスク）

## 6. UI要件（入力UX/出力UI/アクセシビリティ）
- [x] 入力フォームの必須/任意とエラーメッセージ統一
- [x] 出力体裁（段落/箇条書き/CTA/コピー/トースト規約）
- [x] 日本語タイポグラフィ/禁則/A11y（ラベル/ロール/フォーカス）

## 7. ロールアウト計画（AB/フラグ/安全運用）
- [x] Feature Flag（FEATURE_B_PLAN）
- [x] ABテスト設計（比率/停止基準/逆戻し手順）
- [x] 障害時フォールバック（旧プロンプト・環境変数トグル）

## 8. リスク・法令・ガイドライン
- [x] 表現リスク（誇大/比較/薬機/景表/知財）と自動抑制ルール
- [x] 個人情報/機微情報の扱い（入力・ログの除外/マスク）
- [x] ブランド/トーンのガードレール（NGワード一覧）

## 9. 運用・ドキュメント
- [x] CONTEXT.md の章立て位置（0?13章）
- [x] RUNBOOK/INDEX/CHANGELOG の更新ルール
- [x] 日次/週次の検証手順（簡易E2E/KPI/連絡先）

---

## 追記メモ
- 本監査票の未充足項目は **すべて CONTEXT.md v2 へ反映済み**。追加の差し込みは現時点不要。
