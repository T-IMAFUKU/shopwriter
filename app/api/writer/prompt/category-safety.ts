// app/api/writer/prompt/category-safety.ts
/**
 * Phase2 P2-2: カテゴリごとの安全許容範囲（Safety Layer 定義）
 *
 * 目的:
 * - 「カテゴリごとに破綻しない一般的な表現」と
 *   「推測扱いとしたい固有情報パターン」をまとめて管理する
 * - compose / postProcess 側から参照するための公式マップ
 *
 * 注意:
 * - このファイル単体ではどこからも参照されておらず、挙動には影響しない
 *   （後続の P2-2-3 / P2-4 で安全に接続する）
 */

export type CategoryKey =
  | "cosmetics_skincare"      // 化粧品（スキンケア）
  | "makeup"                  // メイクアップ
  | "haircare"                // ヘアケア
  | "food_drink"              // 食品・飲料
  | "supplement"              // サプリメント
  | "fashion_apparel"         // ファッション（衣類）
  | "shoes"                   // シューズ
  | "fashion_accessory"       // ファッション小物
  | "gadget"                  // ガジェット（デバイス）
  | "daily_goods"             // 生活雑貨
  | "bedding_interior"        // 寝具・インテリア
  | "outdoor_sports";         // アウトドア・スポーツ用品

export type CategorySafetyDefinition = {
  /** 内部で扱うキー（slug） */
  key: CategoryKey;
  /** 人間向けラベル（日本語） */
  label: string;
  /**
   * カテゴリ判定に使うエイリアス
   * - category や product_name、キーワードなどに含まれていればマッチ候補
   * - 実際のマッチ判定ロジックは後続の P2-2-3 / P2-3 で実装する
   */
  aliases: string[];
  /**
   * 「このカテゴリで一般的に許容される、抽象度の高い表現」
   * - 推測ではなく、カテゴリの一般的なイメージとして破綻しない語彙
   * - プロンプト側のヒント目的（必ずしもすべて出力させるものではない）
   */
  allowedWords: string[];
  /**
   * 「このカテゴリでは、特に推測させたくない固有情報のパターン」
   * - 実際には postProcess などで、文章中にこれらが含まれていないかチェックする想定
   * - 正規表現ではなく、まずは単純な部分一致パターンとして扱う前提
   */
  bannedPatterns: string[];
};

/**
 * カテゴリ共通で「推測扱い」としたい NG パターン
 * - 具体的な数値・容量・寸法・型番・発売日・価格・割引率など
 * - ここでは「ヒューリスティックな文字列パターン」として定義しておき、
 *   実際のマッチングは後続フェーズで調整する
 */
export const COMMON_BANNED_PATTERNS: string[] = [
  // 数値 + 単位まわり
  "ml",
  "mL",
  "g",
  "kg",
  "mg",
  "L",
  "ℓ",
  "cm",
  "mm",
  "インチ",
  "inch",
  "in.",
  // 時間・期間
  "時間",
  "分",
  "秒",
  "年保証",
  "年間保証",
  // パーセンテージ
  "%",
  "％",
  // ストレージ・解像度
  "GB",
  "TB",
  "MB",
  "dpi",
  "K対応",
  "4K",
  "8K",
  // 通信規格・バージョン
  "Bluetooth",
  "Wi-Fi",
  "5G",
  // 価格・割引・ポイント
  "円",
  "割引",
  "OFF",
  "ポイント還元",
  "キャッシュバック",
  // レビュー・ランキング
  "レビュー",
  "口コミ",
  "星",
  "★",
  "ランキング",
  "第1位",
  "No.1",
  "ナンバーワン",
  // 型番・モデル・シリーズ名っぽい記述
  "型番",
  "モデル",
  "シリーズ",
  "Edition",
  "エディション",
  // 認証・受賞歴
  "認証",
  "受賞",
  "アワード",
  "グランプリ",
  // 日付まわり
  "発売日",
  "リリース",
  "年",
  "月",
  "日",
];

/**
 * カテゴリごとの安全許容範囲マップ
 * - key: CategoryKey（内部識別子）
 * - value: CategorySafetyDefinition
 */
export const CATEGORY_SAFETY: Record<CategoryKey, CategorySafetyDefinition> = {
  cosmetics_skincare: {
    key: "cosmetics_skincare",
    label: "化粧品（スキンケア）",
    aliases: [
      "化粧水",
      "乳液",
      "美容液",
      "クリーム",
      "スキンケア",
      "保湿ケア",
      "ローション",
      "トナー",
    ],
    allowedWords: [
      "しっとり",
      "うるおい",
      "肌なじみ",
      "乾燥ケア",
      "保湿",
      "透明感",
      "やわらかさ",
      "みずみずしい",
      "なめらか",
      "角質層まで届く",
      "肌のキメ",
      "ハリ感",
      "つや",
      "素肌感",
      "敏感肌にも使いやすい",
      "毎日ケア",
      "ベーシックケア",
      "ライトな使用感",
      "ベタつきにくい",
      "さわやか",
      "無香料タイプが多い",
      "肌の水分を守る",
      "日常使いしやすい",
      "すっきり",
      "さっぱり感",
      "肌を整える",
      "スッと伸びる",
      "オールシーズン使いやすい",
      "手軽に続けられる",
      "清潔感",
      "やさしい使い心地",
    ],
    bannedPatterns: [...COMMON_BANNED_PATTERNS],
  },

  makeup: {
    key: "makeup",
    label: "メイクアップ",
    aliases: [
      "メイク",
      "ファンデーション",
      "リップ",
      "口紅",
      "アイシャドウ",
      "チーク",
      "マスカラ",
      "ベースメイク",
    ],
    allowedWords: [
      "自然な仕上がり",
      "肌になじむ色味",
      "ぼかしやすい",
      "発色がやさしい",
      "崩れにくい",
      "密着感",
      "日常使い",
      "軽い仕上がり",
      "よれにくい",
      "ふんわり質感",
      "透明感メイク",
      "ツヤ感",
      "ナチュラルメイク",
      "メイク初心者向け",
      "扱いやすいテクスチャー",
      "ブラシで調整しやすい",
      "伸びがよい",
      "肌を明るく見せる",
      "手早く仕上げられる",
      "シームレスな仕上がり",
      "重ね使いしやすい",
      "色ムラ補正",
      "ほどよいカバー力",
      "柔らかな印象に仕上げる",
      "気軽に使える",
      "くすみに配慮",
      "日常のメイクに取り入れやすい",
    ],
    bannedPatterns: [...COMMON_BANNED_PATTERNS],
  },

  haircare: {
    key: "haircare",
    label: "ヘアケア",
    aliases: [
      "シャンプー",
      "トリートメント",
      "コンディショナー",
      "ヘアオイル",
      "ヘアミルク",
      "ヘアケア",
    ],
    allowedWords: [
      "指通りがよい",
      "まとまりやすい",
      "しなやか",
      "軽い仕上がり",
      "パサつきケア",
      "髪を整える",
      "なめらか",
      "枝毛ケア",
      "キシみにくい",
      "香りがやさしい",
      "地肌に使いやすい",
      "毎日のケアに",
      "フレッシュな印象",
      "髪をやわらかく",
      "サラサラ",
      "満遍なく広がる泡",
      "すっきり洗える",
      "バランスよく整える",
      "扱いやすい髪に",
      "さらっと自然な仕上がり",
      "年齢問わず使いやすい",
      "使い続けやすい",
      "リラックス感のある香り",
      "髪の手触りを整える",
      "日常使いに向いている",
      "ベーシックケア",
    ],
    bannedPatterns: [...COMMON_BANNED_PATTERNS],
  },

  food_drink: {
    key: "food_drink",
    label: "食品・飲料",
    aliases: [
      "食品",
      "飲料",
      "ドリンク",
      "お菓子",
      "スナック",
      "調味料",
      "ソース",
      "スープ",
      "お茶",
      "コーヒー",
    ],
    allowedWords: [
      "風味豊か",
      "香ばしい",
      "まろやか",
      "やさしい味わい",
      "毎日楽しめる",
      "食べやすい",
      "ほどよい甘さ",
      "軽い口当たり",
      "自然な香り",
      "後味すっきり",
      "手軽に使える",
      "家族みんなで楽しめる",
      "やさしい旨み",
      "シンプルな味付け",
      "飽きのこない味",
      "クセが少ない",
      "日常づかいしやすい",
      "食卓に取り入れやすい",
      "素材の個性を感じられる",
      "ベーシックな味わい",
      "使うシーンを選ばない",
      "定番の組み合わせ",
      "ホッとする味わい",
      "穏やかな香り",
    ],
    bannedPatterns: [...COMMON_BANNED_PATTERNS],
  },

  supplement: {
    key: "supplement",
    label: "サプリメント",
    aliases: [
      "サプリ",
      "サプリメント",
      "健康食品",
      "プロテイン",
      "ビタミン",
      "栄養補助",
    ],
    allowedWords: [
      "毎日続けやすい",
      "ライフスタイルに取り入れやすい",
      "シンプルな構成",
      "負担になりにくい",
      "味にクセが少ない",
      "気軽に取り入れられる",
      "家族と一緒に使いやすい",
      "ベーシックな成分構成",
      "体調管理の一環として",
      "無理なく継続できる",
      "健やかな毎日をサポート",
      "軽い飲み心地",
      "自然に取り入れられる",
      "日々のケアに",
      "水や食事と合わせやすい",
      "初めてでも取り入れやすい",
      "過剰な主張のない風味",
      "生活のリズムに組み込みやすい",
      "習慣にしやすい",
      "続けやすい粒感",
      "シンプルなケア",
      "無理のない取り入れ方",
      "穏やかな印象",
      "落ち着いた飲み口",
      "ベーシックサポート",
    ],
    bannedPatterns: [...COMMON_BANNED_PATTERNS],
  },

  fashion_apparel: {
    key: "fashion_apparel",
    label: "ファッション（衣類）",
    aliases: [
      "Tシャツ",
      "シャツ",
      "トップス",
      "パンツ",
      "スカート",
      "パーカー",
      "ワンピース",
      "アパレル",
    ],
    allowedWords: [
      "軽やか",
      "動きやすい",
      "日常使いしやすい",
      "合わせやすいデザイン",
      "季節を選ばない",
      "柔らかい肌触り",
      "すっきり見える",
      "快適な着心地",
      "リラックス感",
      "ベーシックアイテム",
      "さりげない印象",
      "カジュアルにも合わせやすい",
      "軽快な着用感",
      "重ね着しやすい",
      "ラフに着こなせる",
      "気負わずに楽しめる",
      "ナチュラルな雰囲気",
      "手入れしやすい",
      "毎日のコーデに取り入れやすい",
      "デイリー使い",
      "シンプルスタイル",
      "汎用性がある",
      "ベーシックスタイル",
      "さらりと着られる",
      "やわらかな落ち感",
      "さわやかな着心地",
      "上品な雰囲気",
      "安心感のある着用感",
    ],
    bannedPatterns: [...COMMON_BANNED_PATTERNS],
  },

  shoes: {
    key: "shoes",
    label: "シューズ",
    aliases: [
      "スニーカー",
      "スリッポン",
      "ローファー",
      "ブーツ",
      "パンプス",
      "靴",
      "シューズ",
    ],
    allowedWords: [
      "歩きやすい",
      "軽い履き心地",
      "長時間履きやすい",
      "クッション性",
      "足への負担が少ない",
      "さっと履ける",
      "フィットしやすい",
      "シンプルなデザイン",
      "毎日使いやすい",
      "動きやすい",
      "扱いやすい",
      "すっきり見える印象",
      "汎用性が高い",
      "通気性を意識した構造",
      "安心感のある足入れ感",
      "気軽に使える",
      "しっかりした踏み心地",
      "安定感",
      "普段づかいに適している",
      "スムーズな歩き出し",
      "落ち着いた印象",
      "服に合わせやすい",
      "日常生活に溶け込みやすい",
      "ソフトな足あたり",
      "自然に馴染む履き心地",
    ],
    bannedPatterns: [...COMMON_BANNED_PATTERNS],
  },

  fashion_accessory: {
    key: "fashion_accessory",
    label: "ファッション小物",
    aliases: [
      "バッグ",
      "カバン",
      "財布",
      "ウォレット",
      "ポーチ",
      "アクセサリー",
      "小物",
    ],
    allowedWords: [
      "持ち運びしやすい",
      "使いやすい",
      "日常で役立つ",
      "落ち着いた印象",
      "シンプルで合わせやすい",
      "実用的",
      "手に取りやすい",
      "気軽に使える",
      "プレゼントにも選ばれやすい",
      "扱いやすいサイズ感",
      "コンパクトな印象",
      "さりげない存在感",
      "落ち着いたトーン",
      "手元を整える",
      "デイリー使いしやすい",
      "軽快な使用感",
      "必要なものをまとめやすい",
      "毎日使い続けやすい",
      "定番アイテムとして取り入れやすい",
      "使う場面が多い",
      "ベーシックな使い心地",
      "手軽な印象",
    ],
    bannedPatterns: [...COMMON_BANNED_PATTERNS],
  },

  gadget: {
    key: "gadget",
    label: "ガジェット（デバイス）",
    aliases: [
      "イヤホン",
      "ヘッドホン",
      "スマホ",
      "スマートフォン",
      "タブレット",
      "PC",
      "ノートPC",
      "カメラ",
      "ゲーム機",
      "Switch",
      "Kindle",
      "AirPods",
    ],
    allowedWords: [
      "持ち運びしやすい",
      "日常に取り入れやすい",
      "使いやすい操作性",
      "軽い感触",
      "直感的に扱いやすい",
      "手に馴染む形状",
      "シンプルな構成",
      "初めてでも扱いやすい",
      "毎日使いやすい",
      "生活に溶け込みやすい",
      "ベーシック機能を備える",
      "気軽に使える",
      "程よい安定感",
      "コンパクトな印象",
      "場所を選ばず使いやすい",
      "扱いに慣れやすい",
      "長時間使いやすい形状",
      "手早く操作できる構造",
      "落ち着いたデザイン",
      "直感的に選べる",
      "自然に取り入れられる",
      "気軽に持ち歩ける",
      "普段使いに向いている",
      "必要最低限の機能構成の印象",
      "日々の生活に馴染む",
      "取り回しがしやすい",
      "負担を感じにくい",
      "扱いやすく設計されている",
      "自然なフィット感",
      "毎日の相棒として使いやすい",
    ],
    bannedPatterns: [...COMMON_BANNED_PATTERNS],
  },

  daily_goods: {
    key: "daily_goods",
    label: "生活雑貨",
    aliases: [
      "雑貨",
      "日用品",
      "キッチン用品",
      "収納",
      "掃除用品",
      "ランドリー",
    ],
    allowedWords: [
      "使いやすい",
      "手に取りやすい",
      "毎日使いやすい",
      "シンプル設計",
      "扱いやすいサイズ感",
      "飽きのこないデザイン",
      "気軽に取り入れられる",
      "家族で使いやすい",
      "清潔感のある印象",
      "日常生活に溶け込む",
      "使い続けやすい",
      "すっきりまとまる印象",
      "実用的",
      "ベーシックな構造",
      "入れ替えしやすい",
      "軽やかな扱い心地",
      "長く使いやすい形状",
      "自然な使い心地",
      "気負わず使える",
      "日々の生活を支える",
      "気軽に試しやすい",
      "スリムな印象",
    ],
    bannedPatterns: [...COMMON_BANNED_PATTERNS],
  },

  bedding_interior: {
    key: "bedding_interior",
    label: "寝具・インテリア",
    aliases: [
      "枕",
      "マクラ",
      "布団",
      "マットレス",
      "寝具",
      "クッション",
      "ラグ",
      "ソファ",
      "インテリア",
    ],
    allowedWords: [
      "やさしい触れ心地",
      "静かにくつろげる",
      "柔らかい印象",
      "落ち着いた雰囲気",
      "毎日使いやすい",
      "体に馴染む感触",
      "リラックスしやすい",
      "自然な寝心地",
      "穏やかな印象",
      "気持ちよく横になれる",
      "シンプルな佇まい",
      "部屋に馴染むデザイン",
      "扱いやすい素材感",
      "季節を問わず使いやすい",
      "ふんわりとした使い心地",
      "体を支える感触",
      "清潔感のある印象",
      "気軽に使える",
      "過度な主張のない空気感",
      "落ち着いたトーン",
      "初めてでも違和感のない使用感",
      "毎日続けて使いやすい",
      "手入れしやすい素材感",
      "自然とくつろげる空気感",
      "身体を休めやすい構造",
      "ほっと落ち着く印象",
    ],
    bannedPatterns: [...COMMON_BANNED_PATTERNS],
  },

  outdoor_sports: {
    key: "outdoor_sports",
    label: "アウトドア・スポーツ用品",
    aliases: [
      "アウトドア",
      "キャンプ",
      "登山",
      "トレッキング",
      "スポーツ用品",
      "水筒",
      "テント",
      "ヨガマット",
    ],
    allowedWords: [
      "扱いやすい",
      "軽快に使える",
      "長時間扱いやすい",
      "動きやすい",
      "持ち運びしやすい",
      "安定した扱い心地",
      "汎用性が高い",
      "日常でも使える",
      "スムーズに扱える",
      "手軽に取り入れられる",
      "さりげないデザイン",
      "直感的に扱える",
      "必要なものをまとめやすい",
      "扱い慣れやすい",
      "気軽に取り入れられる",
      "コンパクトな印象",
      "動作が軽い",
      "スタンダードな構成",
      "ラフに扱える",
      "バランスよく使える",
      "長く使いやすい構造",
      "機能的すぎない印象",
      "日常使いの延長で使える",
      "扱いに不慣れでも取り入れやすい",
      "生活導線に馴染む",
      "負担を感じにくい",
      "日常の動作に寄り添う設計",
    ],
    bannedPatterns: [...COMMON_BANNED_PATTERNS],
  },
};
