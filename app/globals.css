@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================
   ベース設定（iOS風トークン） ※合意ベース
   ========================================= */

:root {
  /* 色（既存：コーポレートネイビー系） */
  --background: 0 0% 100%;
  --foreground: 222.2 47.4% 11.2%;
  --card: 0 0% 100%;
  --card-foreground: 222.2 47.4% 11.2%;
  --popover: 0 0% 100%;
  --popover-foreground: 222.2 47.4% 11.2%;

  --primary: 214 52% 24.5%;
  --primary-foreground: 210 40% 98%;
  --secondary: 210 40% 96.1%;
  --secondary-foreground: 222.2 47.4% 11.2%;
  --muted: 210 40% 96.1%;
  --muted-foreground: 215.4 16.3% 46.9%;
  --accent: 210 40% 96.1%;
  --accent-foreground: 222.2 47.4% 11.2%;

  /* S3 追加トークン */
  --success: 194 70% 27%;
  --success-foreground: 210 40% 98%;
  --destructive: 0 74% 42%;
  --destructive-foreground: 210 40% 98%;

  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;
  --ring: 222.2 84% 4.9%;

  /* 角丸（iOS寄り） */
  --radius: 0.75rem;

  /* UIトークン（角丸） */
  --ui-radius-sm: 0.5rem;
  --ui-radius-md: 0.75rem;
  --ui-radius-lg: 1rem;
  --ui-radius-full: 9999px;

  /* UIトークン（余白） */
  --spacing-0: 0rem;
  --spacing-1: 0.25rem;
  --spacing-2: 0.5rem;
  --spacing-3: 0.75rem;
  --spacing-4: 1rem;
  --spacing-5: 1.25rem;
  --spacing-6: 1.5rem;
  --spacing-7: 1.75rem;
  --spacing-8: 2rem;

  /* ガラス */
  --ui-glass-bg: 255 255 255 / 0.6;
  --ui-glass-border: 0 0 0 / 0.06;
  --ui-glass-blur: 16px;

  /* 影 */
  --ui-shadow-sm: 0 1px 2px rgba(0,0,0,0.06);
  --ui-shadow-md: 0 8px 20px rgba(0,0,0,0.08);

  /* 区切り線 */
  --ui-separator: 0 0 0 / 0.08;
}

.dark {
  --background: 222.2 47.4% 11.2%;
  --foreground: 210 40% 98%;
  --card: 222.2 47.4% 11.2%;
  --card-foreground: 210 40% 98%;
  --popover: 222.2 47.4% 11.2%;
  --popover-foreground: 210 40% 98%;
  --primary: 213 65% 15%;
  --primary-foreground: 210 40% 98%;
  --secondary: 217.2 32.6% 17.5%;
  --secondary-foreground: 210 40% 98%;
  --muted: 217.2 32.6% 17.5%;
  --muted-foreground: 215 20.2% 65.1%;
  --accent: 217.2 32.6% 17.5%;
  --accent-foreground: 210 40% 98%;

  --success: 194 70% 27%;
  --success-foreground: 210 40% 98%;
  --destructive: 0 74% 42%;
  --destructive-foreground: 210 40% 98%;

  --border: 217.2 32.6% 17.5%;
  --input: 217.2 32.6% 17.5%;
  --ring: 210 40% 98%;

  --ui-glass-bg: 20 20 20 / 0.5;
  --ui-glass-border: 255 255 255 / 0.08;
  --ui-glass-blur: 16px;

  --ui-shadow-sm: 0 1px 2px rgba(0,0,0,0.5);
  --ui-shadow-md: 0 8px 20px rgba(0,0,0,0.45);

  --ui-separator: 255 255 255 / 0.1;
}

/* =========================================
   Base（＋リスト再発対策）
   ========================================= */
@layer base {
  * { @apply border-border; }
  body { @apply bg-background text-foreground; }

  /* リストの透け/食い込み対策 */
  ul { list-style: disc; padding-left: 1.25rem; margin: 0.5rem 0; }
  ol { list-style: decimal; padding-left: 1.5rem;  margin: 0.5rem 0; }
  li { line-height: 1.6; overflow: visible; margin: 0.25rem 0; }
  li > ul, li > ol { margin-top: 0.25rem; margin-bottom: 0.25rem; }
  :where(ul,ol) :where(p) { margin: 0.25rem 0; }

  table { @apply w-full border-collapse; }
  th, td { @apply p-3 align-middle; }
  thead th { @apply text-sm text-muted-foreground; }

  input, textarea, select, button { border-radius: var(--ui-radius-md); }
  input:focus, textarea:focus, select:focus {
    outline: none;
    box-shadow: 0 0 0 3px hsl(var(--ring) / 0.25);
  }
}

/* =========================================
   Components
   ========================================= */

/* ガラス面 */
.glass {
  background: rgba(var(--ui-glass-bg));
  backdrop-filter: blur(var(--ui-glass-blur));
  -webkit-backdrop-filter: blur(var(--ui-glass-blur));
  border: 1px solid rgba(var(--ui-glass-border));
  border-radius: var(--ui-radius-lg);
  box-shadow: var(--ui-shadow-sm);
}

/* Hairline 区切り */
.hairline { border-top: 1px solid rgba(var(--ui-separator)); }

/* =========================================
   Buttons（詰まり解消・視認性向上）
   ========================================= */
/* 共通：行高1・文字詰まり解消・左右余白拡大・nowrap・アイコン隙間 */
.btn {
  @apply inline-flex items-center justify-center text-sm font-medium
         focus-visible:outline-none focus-visible:ring-2
         focus-visible:ring-primary focus-visible:ring-offset-2
         focus-visible:ring-offset-background select-none;
  height: 2.5rem;               /* h-10 */
  padding: 0 0.875rem;          /* px-3.5：詰まり解消 */
  gap: 0.375rem;                /* 文字とアイコンの隙間 */
  line-height: 1;               /* ボタン内の縦詰まりを抑える */
  white-space: nowrap;          /* 折返し抑止 */
  border-radius: var(--ui-radius-md);
  box-shadow: var(--ui-shadow-sm);
  transition: background-color .15s ease, color .15s ease, box-shadow .15s ease;
}
.btn:hover { filter: brightness(0.98); }
.btn:disabled, .btn[aria-disabled="true"] {
  opacity: .6; cursor: not-allowed;
}

/* 主ボタン（濃色） */
.btn-primary {
  @apply text-primary-foreground;
  background-color: hsl(var(--primary));
  border-radius: var(--ui-radius-md);
}
.btn-primary:hover { background-color: hsl(var(--primary) / .92); }

/* アウトライン（淡色面に乗っても読みやすい） */
.btn-outline {
  @apply text-foreground;
  background-color: hsl(var(--secondary) / .55);
  border: 1px solid hsl(var(--border));
  border-radius: var(--ui-radius-md);
  box-shadow: var(--ui-shadow-sm);
}
.btn-outline:hover { background-color: hsl(var(--secondary) / .75); }

/* 成功/破壊（通知ボタン等） */
.btn-success {
  color: hsl(var(--success-foreground));
  background-color: hsl(var(--success));
}
.btn-success:hover { background-color: hsl(var(--success) / .9); }

.btn-danger {
  color: hsl(var(--destructive-foreground));
  background-color: hsl(var(--destructive));
}
.btn-danger:hover { background-color: hsl(var(--destructive) / .9); }

/* サイズバリエーション（任意） */
.btn-sm { height: 2.25rem; padding: 0 0.75rem; border-radius: var(--ui-radius-sm); }
.btn-lg { height: 2.75rem; padding: 0 1rem;    border-radius: var(--ui-radius-lg); }

/* CTA（pill） */
.btn-cta {
  @apply font-semibold;
  height: 2.75rem;
  padding: 0 1rem;
  border-radius: var(--ui-radius-full);
  box-shadow: var(--ui-shadow-md);
}

/* =========================================
   Utilities
   ========================================= */
@layer utilities {
  .shadow-soft { box-shadow: var(--ui-shadow-sm); }
  .shadow-soft-md { box-shadow: var(--ui-shadow-md); }
}
